:javascript
  $(document).ready(function () {
    var data = $.parseJSON( "#{@contacts_json}" ),
        autocompleteInput = $("#contact_autocomplete");

    autocompleteInput.autoSuggest(data, {
      selectedItemProp: "name",
      searchObjProps: "name",
      asHtmlID: "contact_ids",
      retrieveLimit: 10,
      minChars: 1,
      keyDelay: 0,
      startText: '',
      emptyText: '#{t('no_results')}',
      preFill: [{ 'name' : "#{params[:name]}",
                 'value' : "#{params[:contact_id]}"}]
      });

    autocompleteInput.focus();
  });

.new_message_pane
  #new_conversation_form
    = form_for Conversation.new do |c|
      .span-2
        %h4
          = "收信人"
      .span-10.last
        = text_field_tag "contact_autocomplete"
      .clearfix
      .span-2
        %h4
          = "主题"
      .span-10.subject
        = c.text_field :subject

      .clearfix
      .span-2
        %h4
          = "内容"

      .span-11.content
        = text_area_tag "conversation[text]", '', :rows => 5
      .clearfix
      .submit
        = c.submit '发送信息', :class => 'glass_button'
