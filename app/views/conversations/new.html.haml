:javascript
  $(document).ready(function () {
    var data = $.parseJSON( "#{@contacts_json}" ),
        autocompleteInput = $("#contact_autocomplete");

    autocompleteInput.autoSuggest(data, {
      selectedItemProp: "name",
      searchObjProps: "name",
      asHtmlID: "contact_ids",
      retrieveLimit: 10,
      minChars: 1,
      keyDelay: 0,
      startText: '',
      emptyText: '#{t('no_results')}',
      preFill: [{ 'name' : "#{params[:name]}",
                 'value' : "#{params[:contact_id]}"}]
      });

    autocompleteInput.focus();
  });

.new_message_pane
  #new_conversation_form
    = form_for Conversation.new do |c|
      .span-2
        %h4
          = t('.to')
      .span-10.last
        = text_field_tag "contact_autocomplete"
      .clearfix
      .span-2
        %h4
          = t('.subject')
      .span-10.last
        = c.text_field :subject

      .clearfix
      .span-12.last
        = text_area_tag "conversation[text]", '', :rows => 5
      .clearfix
      = c.submit t('send'), :class => 'button'
