processComment(<%= @comment.post_id %>, <%= @comment.id %>,"<%= escape_javascript(render(:partial => 'comments/comment', :locals => { :comment => @comment}))%>");

function processComment(postId,commentId,html){  

    if( $(".comment[id='"+commentId+"']").length === 0 ) {

      var post = $(".comments[id='"+postId+"']");
      stream_element = post.parent();
      comment = stream_element.find( ".comment_form" );
      post.append($(html).fadeIn( 100 ));
      $(".comment[id='"+commentId+"']").css("opacity","100" );
      post.removeClass( "hide" );
      comment.find( "#comment_content" ).val("");
      comment.find(".contacts").val("");
      Mention.clear();
      }
}

